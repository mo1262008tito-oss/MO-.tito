
/* MAFA ACADEMY - GLOBAL STYLESHEET V3.0
  Design System: Futuristic Dark UI
  Author: TITo-TEC 
*/

:root {
  /* الألوان الأساسية - سيتم تجاوزها ديناميكياً من React */
  --primary: #3b82f6;
  --primary-glow: rgba(59, 130, 246, 0.3);
  --bg-dark: #050505;
  --card-bg: #111111;
  --text-main: #ffffff;
  --text-dim: #9ca3af;
  --border-color: rgba(255, 255, 255, 0.08);
  --glass-bg: rgba(255, 255, 255, 0.03);
}

/* 1. Reset & Base Styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

body {
  background-color: var(--bg-dark);
  color: var(--text-main);
  font-family: 'Cairo', sans-serif;
  line-height: 1.6;
  overflow-x: hidden;
  direction: rtl; /* اتجاه الكتابة للمنصة العربية */
}

/* 2. Scrollbar Customization */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: var(--bg-dark);
}

::-webkit-scrollbar-thumb {
  background: var(--border-color);
  border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--primary);
}

.no-scrollbar::-webkit-scrollbar {
  display: none;
}

/* 3. Typography & Gradients */
h1, h2, h3, h4, .font-black {
  font-weight: 900;
  letter-spacing: -0.02em;
}

.text-gradient {
  background: linear-gradient(to right, var(--primary), #ffffff);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* 4. Layout & Containers */
.container-mafa {
  width: 100%;
  max-width: 1440px;
  margin: 0 auto;
  padding: 0 1.5rem;
}

/* 5. Header & Navigation */
header {
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 6. Hero Section Background */
.hero-glow {
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 100%;
  height: 600px;
  filter: blur(120px);
  z-index: -10;
  opacity: 0.6;
}

/* 7. Components - Course Cards */
.course-card {
  background: var(--card-bg);
  border: 1px solid var(--border-color);
  border-radius: 40px;
  transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
  position: relative;
  overflow: hidden;
}

.course-card:hover {
  transform: translateY(-10px);
  border-color: rgba(255, 255, 255, 0.2);
  box-shadow: 0 20px 40px rgba(0,0,0,0.4);
}

.course-card img {
  transition: transform 0.8s ease;
}

.course-card:hover img {
  transform: scale(1.1);
}

/* 8. Buttons & Interactivity */
.btn-mafa {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  border-radius: 1.25rem;
  font-weight: 800;
  transition: all 0.3s ease;
  cursor: pointer;
  border: none;
  overflow: hidden;
}

.btn-mafa-primary {
  background: #ffffff;
  color: #000000;
}

.btn-mafa-primary:hover {
  transform: scale(1.05);
  box-shadow: 0 0 20px rgba(255,255,255,0.2);
}

/* 9. Glassmorphism Effects */
.glass-effect {
  background: var(--glass-bg);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--border-color);
}

/* 10. Notifications Panel */
.notif-panel {
  box-shadow: 0 30px 60px -12px rgba(0, 0, 0, 0.5);
  animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* 11. Modal Styles (Wallet & Sidebar) */
.modal-backdrop {
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(10px);
}

.sidebar-aside {
  box-shadow: -10px 0 50px rgba(0,0,0,0.5);
}

/* 12. Input Fields */
input[type="text"], select {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: white;
  transition: border 0.3s ease;
}

input:focus {
  border-color: var(--primary) !important;
  outline: none;
}

/* 13. Leaderboard Styles */
.rank-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 35px;
  height: 35px;
  border-radius: 50%;
  font-weight: 900;
}

/* 14. Responsive Grid System */
.course-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 2rem;
}

/* 15. Smart Tools Section */
.tool-card {
  position: relative;
  z-index: 1;
}

.tool-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, var(--primary-glow), transparent);
  z-index: -1;
  border-radius: 50px;
  opacity: 0;
  transition: opacity 0.5s ease;
}

.tool-card:hover::before {
  opacity: 1;
}

/* 16. Footer Styles */
footer li {
  list-style: none;
  transition: all 0.3s ease;
}

footer li:hover {
  padding-right: 8px;
  color: white;
}

/* 17. Animations */
.animate-float {
  animation: float 6s ease-in-out infinite;
}

@keyframes float {
  0% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
  100% { transform: translateY(0px); }
}

/* 18. Wallet Specifics */
.wallet-balance-card {
  background: linear-gradient(180deg, rgba(255,255,255,0.05) 0%, transparent 100%);
  box-shadow: inset 0 0 20px rgba(255,255,255,0.02);
}

/* 19. Media Queries */
@media (max-width: 768px) {
  .text-6xl { font-size: 3rem; }
  .sidebar-aside { width: 100% !important; }
  .p-12 { padding: 1.5rem; }
  .course-grid { grid-template-columns: 1fr; }
}

/* 20. High Precision Utilities */
.z-max { z-index: 9999; }
.tracking-tightest { letter-spacing: -0.05em; }
.blur-soft { filter: blur(4px); }

/* 21. Dynamic Theme Engine (الربط مع مراحل الدراسة) */
.theme-high-1 { --primary: #3b82f6; --primary-glow: rgba(59, 130, 246, 0.2); }
.theme-high-2 { --primary: #8b5cf6; --primary-glow: rgba(139, 92, 246, 0.2); }
.theme-high-3 { --primary: #ef4444; --primary-glow: rgba(239, 68, 68, 0.2); }

/* 22. Advanced Background Gradients (تأثيرات الخلفية السينمائية) */
.bg-mesh {
  background-image: 
    radial-gradient(at 0% 0%, var(--primary-glow) 0, transparent 50%),
    radial-gradient(at 50% 0%, rgba(255, 255, 255, 0.02) 0, transparent 50%),
    radial-gradient(at 100% 0%, var(--primary-glow) 0, transparent 50%);
  background-attachment: fixed;
}

/* 23. Interactive Course Grid (تنسيق شبكة الكورسات المتقدم) */
.course-card-overlay {
  background: linear-gradient(0deg, var(--card-bg) 0%, transparent 100%);
  opacity: 0;
  transition: opacity 0.4s ease;
}

.course-card:hover .course-card-overlay {
  opacity: 1;
}

/* 24. Skeleton Loading (أنيميشن التحميل الذكي) */
.skeleton {
  background: linear-gradient(90deg, #111 25%, #1a1a1a 50%, #111 75%);
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s infinite;
  border-radius: 20px;
}

@keyframes skeleton-loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* 25. Custom Toggle & Buttons (أزرار التبديل) */
.branch-toggle-btn {
  position: relative;
  z-index: 1;
  overflow: hidden;
}

.branch-toggle-btn::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 2px;
  background: var(--primary);
  transform: scaleX(0);
  transition: transform 0.3s ease;
}

.branch-toggle-btn.active::after {
  transform: scaleX(1);
}

/* 26. User Rank & Leaderboard (لوحة الصدارة الاحترافية) */
.leaderboard-row {
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid transparent;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.leaderboard-row:hover {
  background: rgba(255, 255, 255, 0.05);
  border-color: var(--border-color);
  transform: scale(1.01) translateX(-5px);
}

.top-3-glow {
  box-shadow: 0 0 30px var(--primary-glow);
}

/* 27. Wallet Card Design (تصميم البطاقات البنكية) */
.payment-method-card {
  perspective: 1000px;
}

.payment-method-card .inner {
  transition: transform 0.6s;
  transform-style: preserve-3d;
}

.payment-method-card:hover .inner {
  transform: rotateY(10deg) rotateX(5deg);
}

/* 28. Smart Sidebar Navigation (تنسيق القائمة الجانبية العميق) */
.nav-link {
  position: relative;
  transition: all 0.3s ease;
}

.nav-link svg {
  transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.nav-link:hover svg {
  transform: scale(1.2) rotate(5deg);
  color: var(--primary);
}

/* 29. Notifications & Badges (التنبيهات) */
.notif-badge {
  position: absolute;
  top: -2px;
  right: -2px;
  width: 8px;
  height: 8px;
  background: #ef4444;
  border-radius: 50%;
  box-shadow: 0 0 10px #ef4444;
  animation: pulse-red 2s infinite;
}

@keyframes pulse-red {
  0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
  70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
  100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
}

/* 30. Lesson Content Player (تنسيق مشغل الدروس) */
.video-container {
  aspect-ratio: 16/9;
  background: #000;
  border-radius: 30px;
  overflow: hidden;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
}

.lesson-list-item {
  border-right: 3px solid transparent;
}

.lesson-list-item.active {
  background: var(--primary-glow);
  border-right-color: var(--primary);
}

/* 31. Tooltips & Popovers */
.mafa-tooltip {
  position: absolute;
  background: #fff;
  color: #000;
  padding: 5px 12px;
  border-radius: 8px;
  font-size: 11px;
  font-weight: bold;
  pointer-events: none;
  box-shadow: 0 10px 20px rgba(0,0,0,0.2);
}

/* 32. Search Bar Enhancements */
.search-input-wrapper {
  position: relative;
}

.search-input-wrapper input:focus + .search-icon {
  color: var(--primary);
  transform: scale(1.1);
}

/* 33. Feature Badges (أوسمة المدرسين) */
.badge-certified {
  background: linear-gradient(45deg, #fbbf24, #f59e0b);
  color: #000;
  padding: 2px 8px;
  border-radius: 6px;
  font-size: 9px;
  font-weight: 900;
  text-transform: uppercase;
}

/* 34. Custom Scroll Area (منطقة التمرير للمواد) */
.subject-tabs-container::-webkit-scrollbar {
  height: 4px;
}

/* 35. Responsive Typography Fixes */
@media (max-width: 1024px) {
  .hero-title { font-size: 3.5rem; line-height: 1.1; }
}

/* 36. Neo-Brutalism Touches (لمسات عصرية) */
.btn-neo {
  box-shadow: 4px 4px 0px var(--primary);
  border: 2px solid var(--primary);
}

.btn-neo:active {
  transform: translate(2px, 2px);
  box-shadow: 0px 0px 0px var(--primary);
}

/* 37. Footer Decorative Icons */
.footer-social-btn {
  background: rgba(255,255,255,0.03);
  border: 1px solid rgba(255,255,255,0.05);
}

.footer-social-btn:hover {
  background: var(--primary);
  color: white;
  transform: translateY(-5px) rotate(8deg);
}

/* 38. Streak Flame Animation (أنيميشن الشعلة) */
.streak-flame {
  filter: drop-shadow(0 0 8px #f97316);
  animation: flame-flicker 1.5s infinite alternate;
}

@keyframes flame-flicker {
  0% { transform: scale(1); opacity: 0.8; }
  100% { transform: scale(1.1); opacity: 1; }
}

/* 39. Mobile Optimization */
@media (max-width: 640px) {
  .course-card { border-radius: 30px; }
  .grid-cols-4 { grid-template-columns: 1fr; }
  .modal-content { border-radius: 40px 40px 0 0; }
}

/* 40. Ultimate Utility Classes */
.clip-path-polygon { clip-path: polygon(0 0, 100% 0, 100% 85%, 0% 100%); }
.mix-blend-overlay { mix-blend-mode: overlay; }

/* 41. Advanced Background Particles (نظام الجزيئات الخلفية) */
.bg-particles {
  position: fixed;
  inset: 0;
  background: 
    radial-gradient(1px 1px at 20px 30px, #fff, rgba(0,0,0,0)),
    radial-gradient(1.5px 1.5px at 40px 70px, var(--primary), rgba(0,0,0,0)),
    radial-gradient(2px 2px at 50px 160px, rgba(255,255,255,0.1), rgba(0,0,0,0));
  background-repeat: repeat;
  background-size: 200px 200px;
  opacity: 0.1;
  pointer-events: none;
  z-index: -1;
}

/* 42. Quiz & Exam Interface (تنسيق واجهة الاختبارات) */
.quiz-option {
  @apply relative p-6 rounded-[24px] border border-white/5 bg-white/[0.02] transition-all cursor-pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
}

.quiz-option:hover {
  @apply bg-white/[0.05] border-white/20;
}

.quiz-option.selected {
  border-color: var(--primary);
  background: var(--primary-glow);
  box-shadow: 0 0 20px var(--primary-glow);
}

.quiz-progress-bar {
  height: 6px;
  background: rgba(255,255,255,0.05);
  border-radius: 10px;
  overflow: hidden;
}

.quiz-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--primary), #fff);
  transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 43. Glassmorphism Modal V2 (نظام النوافذ المتطور) */
.modal-glass {
  background: rgba(10, 10, 10, 0.8);
  backdrop-filter: blur(40px) saturate(150%);
  -webkit-backdrop-filter: blur(40px) saturate(150%);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 50px 100px -20px rgba(0, 0, 0, 0.7);
}

/* 44. Cyber-Buttons (أزرار سيبرانية) */
.btn-cyber {
  position: relative;
  padding: 1rem 2rem;
  background: transparent;
  text-transform: uppercase;
  font-weight: 900;
  color: var(--primary);
  border: 1px solid var(--primary);
  overflow: hidden;
  transition: 0.5s;
}

.btn-cyber:hover {
  background: var(--primary);
  color: #000;
  box-shadow: 0 0 30px var(--primary);
}

.btn-cyber::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
  transition: 0.5s;
}

.btn-cyber:hover::before {
  left: 100%;
}

/* 45. Floating Labels (تنسيق الحقول الذكية) */
.input-group {
  position: relative;
  margin-bottom: 2rem;
}

.input-group label {
  position: absolute;
  top: 50%;
  right: 20px;
  transform: translateY(-50%);
  color: #666;
  pointer-events: none;
  transition: 0.3s;
  font-size: 0.8rem;
}

.input-group input:focus ~ label,
.input-group input:not(:placeholder-shown) ~ label {
  top: -10px;
  right: 15px;
  font-size: 0.7rem;
  color: var(--primary);
  background: #050505;
  padding: 0 10px;
}

/* 46. Table UI (جداول البيانات والنتائج) */
.mafa-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0 12px;
}

.mafa-table tr {
  @apply bg-white/[0.02] transition-all;
}

.mafa-table tr:hover {
  @apply bg-white/[0.05];
}

.mafa-table td, .mafa-table th {
  padding: 20px;
}

.mafa-table th {
  @apply text-gray-500 font-bold text-xs uppercase tracking-widest text-right;
}

.mafa-table td:first-child { border-radius: 0 24px 24px 0; }
.mafa-table td:last-child { border-radius: 24px 0 0 24px; }

/* 47. Tooltip System (نظام شروحات الأدوات) */
[data-tooltip] {
  position: relative;
}

[data-tooltip]::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 120%;
  left: 50%;
  transform: translateX(-50%) scale(0.9);
  padding: 8px 15px;
  background: #fff;
  color: #000;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 900;
  white-space: nowrap;
  opacity: 0;
  transition: 0.3s;
  pointer-events: none;
}

[data-tooltip]:hover::after {
  opacity: 1;
  transform: translateX(-50%) scale(1);
}

/* 48. Neon Glow Text (نصوص النيون) */
.neon-text {
  text-shadow: 
    0 0 10px var(--primary-glow),
    0 0 20px var(--primary-glow),
    0 0 40px var(--primary);
}

/* 49. Sidebar Navigation 3D (تأثير القائمة ثلاثي الأبعاد) */
.sidebar-link-active {
  background: linear-gradient(90deg, var(--primary-glow), transparent);
  border-right: 4px solid var(--primary);
  @apply scale-105 origin-right;
}

/* 50. Scroll Animation (أنيميشن الظهور عند التمرير) */
.reveal {
  opacity: 0;
  transform: translateY(30px);
  transition: all 0.8s ease-out;
}

.reveal.active {
  opacity: 1;
  transform: translateY(0);
}

/* 51. Avatar Pulse (تأثير الصورة الشخصية) */
.avatar-online {
  position: relative;
}

.avatar-online::after {
  content: '';
  position: absolute;
  bottom: 2px;
  left: 2px;
  width: 12px;
  height: 12px;
  background: #10b981;
  border: 3px solid #050505;
  border-radius: 50%;
}

/* 52. Custom Checkbox (مربعات الاختيار) */
.mafa-checkbox {
  @apply w-6 h-6 rounded-lg border-2 border-white/10 bg-white/5 appearance-none cursor-pointer transition-all;
}

.mafa-checkbox:checked {
  @apply bg-primary border-primary;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z'/%3E%3C/svg%3E");
}

/* 53. Card Tilt Effect (إمالة الكروت) */
.tilt-card {
  transform-style: preserve-3d;
  perspective: 1000px;
}

.tilt-card .content {
  transform: translateZ(50px);
}

/* 54. Mobile Tab Bar (شريط التنقل السفلي للهواتف) */
@media (max-width: 768px) {
  .mobile-bottom-nav {
    @apply fixed bottom-0 left-0 right-0 h-20 bg-black/80 backdrop-blur-xl border-t border-white/10 flex items-center justify-around z-[5000];
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* 55. Loading Spinner V2 (مؤشر التحميل) */
.loader-mafa {
  width: 48px;
  height: 48px;
  border: 3px solid var(--primary);
  border-radius: 50%;
  display: inline-block;
  position: relative;
  box-sizing: border-box;
  animation: rotation 1s linear infinite;
}

.loader-mafa::after {
  content: '';  
  box-sizing: border-box;
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 3px solid transparent;
  border-bottom-color: #fff;
}

@keyframes rotation {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* 56. Footer Background Overlay */
.footer-pattern {
  background-image: radial-gradient(var(--border-color) 1px, transparent 1px);
  background-size: 40px 40px;
}

/* 57. Profile Settings Section */
.settings-section {
  @apply p-8 rounded-[32px] bg-white/[0.02] border border-white/5 mb-8;
}

/* 58. Notification Toast (رسائل التنبيه العلوية) */
.toast-msg {
  @apply fixed top-10 left-1/2 -translate-x-1/2 p-4 rounded-2xl bg-white text-black font-bold shadow-2xl z-[9999] flex items-center gap-3;
  animation: toast-slide-down 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes toast-slide-down {
  from { top: -100px; }
  to { top: 40px; }
}

/* 59. Interactive Map Placeholder */
.map-canvas {
  @apply w-full h-80 rounded-[40px] bg-white/5 border border-white/10 overflow-hidden relative grayscale;
  transition: all 0.5s ease;
}

.map-canvas:hover {
  @apply grayscale-0;
}

/* 60. Final Polish Utility */
.mask-linear {
  mask-image: linear-gradient(to bott
                              om, black 50%, transparent 100%);
}

/* 61. Chat System UI (واجهة المحادثة مع الدعم والمدرسين) */
.chat-bubble {
  @apply max-w-[80%] p-4 rounded-[24px] mb-4 text-sm font-medium relative;
}

.chat-bubble-sender {
  @apply bg-primary text-white self-end rounded-bl-none;
  box-shadow: 0 10px 20px var(--primary-glow);
}

.chat-bubble-receiver {
  @apply bg-white/5 text-gray-300 self-start rounded-br-none border border-white/5;
}

.chat-input-area {
  @apply sticky bottom-0 bg-[#0a0a0a]/80 backdrop-blur-xl p-4 border-t border-white/5;
}

/* 62. Teacher Profile Cards (بطاقات المدرسين السينمائية) */
.teacher-card {
  @apply relative aspect-[3/4] rounded-[40px] overflow-hidden group border border-white/5;
}

.teacher-card-info {
  @apply absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent flex flex-col justify-end p-8 translate-y-4 group-hover:translate-y-0 transition-transform duration-500;
}

.teacher-card-tags {
  @apply absolute top-6 right-6 flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-opacity delay-100;
}

/* 63. Gamification & Rewards (نظام الأوسمة والمكافآت) */
.badge-gold {
  background: radial-gradient(circle at top left, #ffd700, #b8860b);
  box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
  @apply p-2 rounded-full border-2 border-white/20;
}

.level-up-anim {
  animation: level-up 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes level-up {
  0% { transform: scale(0.5); opacity: 0; }
  50% { filter: brightness(2); }
  100% { transform: scale(1); opacity: 1; }
}

/* 64. 3D Card Hover (تأثير الميلان ثلاثي الأبعاد المتقدم) */
.preserve-3d {
  transform-style: preserve-3d;
}

.backface-hidden {
  backface-visibility: hidden;
}

/* 65. Advanced List Animations (أنيميشن القوائم التدريجي) */
.stagger-list > * {
  opacity: 0;
  transform: translateX(20px);
}

.stagger-list.active > * {
  opacity: 1;
  transform: translateX(0);
  transition: all 0.5s ease-out;
}

/* إنشاء تأخير تلقائي للعناصر الـ 10 الأولى */
.stagger-list.active > *:nth-child(1) { transition-delay: 0.1s; }
.stagger-list.active > *:nth-child(2) { transition-delay: 0.2s; }
.stagger-list.active > *:nth-child(3) { transition-delay: 0.3s; }
.stagger-list.active > *:nth-child(4) { transition-delay: 0.4s; }

/* 66. Video Player Custom Controls (تنسيق أزرار المشغل) */
.player-control-btn {
  @apply p-3 rounded-full bg-white/10 hover:bg-white/20 text-white transition-all active:scale-90;
}

.progress-slider {
  @apply w-full h-1 bg-white/10 rounded-full overflow-hidden relative cursor-pointer;
}

.progress-slider-fill {
  @apply absolute inset-y-0 left-0 bg-primary;
}

/* 67. Neumorphic Accents (لمسات النيومورفيزم المظلم) */
.neu-inset {
  background: #0a0a0a;
  box-shadow: inset 4px 4px 8px #050505, 
              inset -4px -4px 8px #0f0f0f;
}

/* 68. Price Tag Design (تصميم ملصق السعر) */
.price-tag {
  @apply relative px-6 py-2 bg-primary text-white font-black rounded-2xl;
  clip-path: polygon(10% 0, 100% 0, 100% 100%, 0 100%);
}

/* 69. Sidebar Profile Section (قسم الملف الشخصي في القائمة) */
.sidebar-user-gradient {
  background: linear-gradient(135deg, var(--primary-glow) 0%, transparent 100%);
  border-radius: 30px;
  @apply p-6 border border-white/5 mb-8;
}

/* 70. Section Header Deco (زخرفة رؤوس الأقسام) */
.section-title-deco {
  @apply relative pr-6 mb-12;
}

.section-title-deco::before {
  content: '';
  @apply absolute right-0 top-1/2 -translate-y-1/2 w-2 h-8 rounded-full bg-primary;
  box-shadow: 0 0 15px var(--primary);
}

/* 71. Custom Multi-Select Dropdown */
.multi-select-item {
  @apply flex items-center justify-between p-4 rounded-xl hover:bg-white/5 transition-all;
}

/* 72. Performance Overlay (للمطورين) */
.fps-counter {
  @apply fixed bottom-4 right-4 p-2 bg-black/80 rounded-lg text-[10px] text-green-500 font-mono z-[9999];
}

/* 73. Interactive Background Blur (تمويه تفاعلي) */
.blur-layer {
  @apply absolute inset-0 backdrop-blur-3xl pointer-events-none;
  mask-image: radial-gradient(circle at center, transparent 30%, black 100%);
}

/* 74. Course Status Badges (حالة الكورسات) */
.status-completed { @apply bg-green-500/10 text-green-500 border border-green-500/20 px-3 py-1 rounded-full text-[10px] font-bold; }
.status-progress { @apply bg-blue-500/10 text-blue-500 border border-blue-500/20 px-3 py-1 rounded-full text-[10px] font-bold; }

/* 75. Loading Dots Animation */
.dots-loading span {
  width: 8px;
  height: 8px;
  @apply bg-primary rounded-full inline-block mx-1;
  animation: dots 1.4s infinite ease-in-out both;
}

.dots-loading span:nth-child(1) { animation-delay: -0.32s; }
.dots-loading span:nth-child(2) { animation-delay: -0.16s; }

@keyframes dots {
  0%, 80%, 100% { transform: scale(0); }
  40% { transform: scale(1); }
}

/* 76. Mobile Header Blur (تنسيق رأس الصفحة في الهاتف) */
@media (max-width: 640px) {
  .mobile-header {
    @apply sticky top-0 bg-[#050505]/60 backdrop-blur-lg z-[1000] py-4;
  }
}

/* 77. Shimmer Effect (تأثير اللمعان على الأزرار) */
.shimmer {
  position: relative;
  overflow: hidden;
}

.shimmer::after {
  content: '';
  @apply absolute inset-0 -translate-x-full;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
  animation: shimmer 2s infinite;
}

@keyframes shimmer {
  100% { transform: translateX(100%); }
}

/* 78. Grid Pattern Background (نمط شبكي) */
.bg-grid-pattern {
  background-size: 50px 50px;
  background-image: 
    linear-gradient(to right, rgba(255,255,255,0.02) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(255,255,255,0.02) 1px, transparent 1px);
}

/* 79. Glowing Border Container */
.glow-border-card {
  @apply relative p-[1px] rounded-[40px] overflow-hidden;
  background: linear-gradient(135deg, var(--primary), transparent, var(--primary));
}

.glow-border-card .inner-content {
  @apply bg-[#0a0a0a] rounded-[39px] h-full w-full p-8;
}

/* 80. Ultimate Typography Smoothing */
html {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}
    /* 81. Analytics & Progress Charts (نظام الإحصائيات البصري) */
.chart-container {
  @apply relative w-full h-64 flex items-end justify-between gap-2 p-4 bg-white/[0.02] rounded-[32px] border border-white/5;
}

.chart-bar {
  @apply w-full bg-primary rounded-t-xl transition-all duration-1000 ease-out relative group;
  min-height: 10px;
}

.chart-bar:hover {
  @apply brightness-125;
  box-shadow: 0 0 20px var(--primary-glow);
}

.chart-tooltip {
  @apply absolute -top-12 left-1/2 -translate-x-1/2 bg-white text-black text-[10px] font-black px-2 py-1 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity;
}

/* 82. Circular Progress (مؤشرات الإنجاز الدائرية) */
.circle-progress {
  --size: 120px;
  --half-size: calc(var(--size) / 2);
  --stroke-width: 10px;
  --radius: calc(var(--half-size) - var(--stroke-width));
  --circumference: calc(2 * 3.14159 * var(--radius));
  width: var(--size);
  height: var(--size);
}

.circle-progress-svg {
  transform: rotate(-90deg);
}

.circle-progress-bg {
  fill: none;
  stroke: rgba(255,255,255,0.05);
  stroke-width: var(--stroke-width);
}

.circle-progress-fill {
  fill: none;
  stroke: var(--primary);
  stroke-width: var(--stroke-width);
  stroke-dasharray: var(--circumference);
  stroke-dashoffset: calc(var(--circumference) - (var(--percent) / 100) * var(--circumference));
  stroke-linecap: round;
  transition: stroke-dashoffset 1s ease-in-out;
}

/* 83. Advanced Forms: Floating Inputs V2 (نظام إدخال البيانات المتقدم) */
.mafa-input-wrapper {
  @apply relative mb-6 group;
}

.mafa-input {
  @apply w-full bg-[#111] border border-white/5 rounded-2xl px-6 py-4 text-sm font-bold transition-all focus:bg-black focus:border-primary/50 outline-none;
}

.mafa-input-icon {
  @apply absolute left-6 top-1/2 -translate-y-1/2 text-gray-500 group-focus-within:text-primary transition-colors;
}

/* 84. Drag & Drop Zone (منطقة رفع الملفات/الواجبات) */
.drop-zone {
  @apply border-2 border-dashed border-white/10 rounded-[40px] p-12 text-center transition-all hover:bg-white/[0.02] hover:border-primary/30 cursor-pointer;
}

.drop-zone-active {
  @apply border-primary bg-primary/5 scale-[0.98];
}

/* 85. Smart Tabs Interface (تبديل المحتوى السلس) */
.tabs-nav {
  @apply flex gap-2 p-2 bg-white/5 rounded-2xl w-fit;
}

.tab-trigger {
  @apply px-6 py-2 rounded-xl text-xs font-black transition-all text-gray-500;
}

.tab-trigger-active {
  @apply bg-white text-black shadow-lg shadow-white/10;
}

/* 86. Exam Countdown Timer (مؤقت الامتحانات) */
.timer-card {
  @apply flex gap-2 items-center justify-center font-mono text-3xl font-black p-4 bg-red-500/10 border border-red-500/20 rounded-2xl text-red-500;
  text-shadow: 0 0 10px rgba(239, 68, 68, 0.3);
}

/* 87. Ultra-Smooth Transitions (أنظمة الانتقال الفائق) */
.page-transition-enter { opacity: 0; transform: scale(1.02); }
.page-transition-enter-active { opacity: 1; transform: scale(1); transition: all 400ms cubic-bezier(0.4, 0, 0.2, 1); }
.page-transition-exit { opacity: 1; }
.page-transition-exit-active { opacity: 0; transition: all 300ms ease; }

/* 88. 3D Parallax Card (تأثير بارالاكس عميق) */
.parallax-wrap {
  perspective: 2000px;
}

.parallax-card {
  transform-style: preserve-3d;
  transition: transform 0.1s;
}

/* 89. Dark Mode Optimization (تحسينات الرؤية الليلية) */
.contrast-enhance {
  text-shadow: 0 2px 4px rgba(0,0,0,0.5);
}

/* 90. Printing Styles (تنسيقات الطباعة للمذكرات والشهادات) */
@media print {
  .no-print { display: none !important; }
  body { background: white; color: black; }
  .certificate-card {
    border: 2px solid #000;
    box-shadow: none;
    page-break-inside: avoid;
  }
}

/* 91. Custom Scrollbar for Sidebar (شريط تمرير جانبي نحيف) */
.side-scroll::-webkit-scrollbar {
  width: 3px;
}

.side-scroll::-webkit-scrollbar-thumb {
  background: var(--primary);
  border-radius: 20px;
}

/* 92. Glowing Pulse (نبض الإضاءة للعناصر الهامة) */
.glow-pulse {
  animation: glow-pulse-anim 2s infinite;
}

@keyframes glow-pulse-anim {
  0% { box-shadow: 0 0 0 0 var(--primary-glow); }
  70% { box-shadow: 0 0 0 15px rgba(255, 255, 255, 0); }
  100% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); }
}

/* 93. Glassmorphism Button (أزرار زجاجية) */
.btn-glass {
  @apply bg-white/10 backdrop-blur-md border border-white/10 hover:bg-white/20 transition-all text-white font-bold;
}

/* 94. Section Separator (فواصل الأقسام الفنية) */
.section-divider {
  @apply w-full h-[1px] bg-gradient-to-r from-transparent via-white/10 to-transparent my-20;
}

/* 95. Background Aura (هالة خلفية متحركة) */
.aura-bg {
  position: absolute;
  width: 40vw;
  height: 40vw;
  background: var(--primary-glow);
  filter: blur(150px);
  border-radius: 50%;
  z-index: -1;
  animation: aura-move 20s infinite alternate linear;
}

@keyframes aura-move {
  from { transform: translate(-10%, -10%); }
  to { transform: translate(20%, 20%); }
}

/* 96. Responsive Grid Fix (إصلاحات الشبكة للمقاسات المتوسطة) */
@media (min-width: 768px) and (max-width: 1024px) {
  .course-grid { grid-template-columns: repeat(2, 1fr); }
}

/* 97. Interactive Table Head (رؤوس جداول تفاعلية) */
.mafa-table th:hover {
  @apply text-white cursor-pointer;
}

/* 98. Notification Center Dot (نقطة مركز الإشعارات) */
.notif-dot {
  @apply absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full border border-[#050505];
}

/* 99. Vertical Text (نصوص رأسية ديكورية) */
.vertical-text {
  writing-mode: vertical-rl;
  @apply text-[10px] text-gray-700 font-black tracking-[0.5em] uppercase pointer-events-none;
}

/* 100. Ultimate Layering (ترتيب الطبقات النهائي) */
.z-modal { z-index: 9000; }
.z-overlay { z-index: 8000; }
.z-nav { z-index: 7000; }
.z-content { z-index: 10; }

    /* 101. Mobile Application Shell (إطار التطبيق للجوال) */
@media (max-width: 768px) {
  body {
    @apply pb-24; /* مساحة لشريط التنقل السفلي */
    -webkit-overflow-scrolling: touch;
  }

  /* إخفاء العناصر غير الضرورية في الموبايل */
  .hide-mobile { display: none !important; }
}

/* 102. iOS-Style Bottom Navigation (شريط التنقل السفلي الاحترافي) */
.mobile-nav-bar {
  @apply fixed bottom-0 left-0 right-0 h-20 bg-black/80 backdrop-blur-2xl border-t border-white/5 flex items-center justify-around z-[5000] px-6;
  padding-bottom: env(safe-area-inset-bottom);
}

.nav-item-active {
  @apply relative text-primary;
}

.nav-item-active::before {
  content: '';
  @apply absolute -top-2 left-1/2 -translate-x-1/2 w-1 h-1 bg-primary rounded-full shadow-[0_0_10px_var(--primary)];
}

/* 103. Mobile Swipe Cards (كروت السحب يميناً ويساراً) */
.swipe-container {
  @apply flex overflow-x-auto snap-x snap-mandatory no-scrollbar gap-4 px-6;
}

.swipe-card {
  @apply snap-center shrink-0 w-[85vw] md:w-auto;
}

/* 104. Profile & Settings UI (واجهة إعدادات الحساب) */
.settings-row {
  @apply flex items-center justify-between p-5 bg-white/[0.03] border border-white/5 rounded-[24px] mb-3 active:scale-[0.98] transition-all;
}

.settings-icon-box {
  @apply w-12 h-12 rounded-2xl flex items-center justify-center bg-white/5 text-gray-400;
}

/* 105. Custom Toggle Switch (زر التبديل الخاص بالإعدادات) */
.mafa-toggle {
  @apply relative w-12 h-6 bg-white/10 rounded-full cursor-pointer transition-all;
}

.mafa-toggle::after {
  content: '';
  @apply absolute top-1 right-1 w-4 h-4 bg-white rounded-full transition-all;
}

.mafa-toggle-active {
  @apply bg-primary;
}

.mafa-toggle-active::after {
  @apply right-7 bg-white;
}

/* 106. Payment Success Animation (أنيميشن نجاح الدفع) */
.success-checkmark {
  width: 80px;
  height: 80px;
  @apply mx-auto mb-6;
}

.check-icon {
  width: 80px;
  height: 80px;
  position: relative;
  border-radius: 50%;
  box-sizing: content-box;
  border: 4px solid #4CAF50;
}

.check-icon::before {
  @apply absolute top-[33px] left-[19px] w-[31px] h-[3px] bg-[#4CAF50] rotate-45;
  content: "";
}

.check-icon::after {
  @apply absolute top-[38px] left-[14px] w-[16px] h-[3px] bg-[#4CAF50] -rotate-45;
  content: "";
}

/* 107. Pull-to-Refresh Simulation (محاكاة سحب الشاشة للتحديث) */
.pull-indicator {
  @apply flex justify-center py-4 text-gray-500 opacity-0 transition-opacity;
}

/* 108. Course Player Sidebar (قائمة الدروس داخل المشغل) */
.player-sidebar {
  @apply w-full lg:w-96 bg-[#0a0a0a] border-r border-white/5 h-full overflow-y-auto side-scroll;
}

.lesson-card {
  @apply p-4 border-b border-white/5 cursor-pointer hover:bg-white/[0.02] transition-colors flex gap-4;
}

.lesson-card.active {
  @apply bg-primary/10 border-r-4 border-r-primary;
}

/* 109. Bottom Sheet Modal (نوافذ الموبايل التي تظهر من الأسفل) */
.bottom-sheet {
  @apply fixed bottom-0 left-0 right-0 bg-[#111] rounded-t-[40px] border-t border-white/10 z-[6000] p-8 pb-12 translate-y-full transition-transform duration-500 ease-out;
}

.bottom-sheet.show {
  @apply translate-y-0;
}

.bottom-sheet-handle {
  @apply w-12 h-1.5 bg-white/10 rounded-full mx-auto mb-8;
}

/* 110. Glass Sticky Header (رأس الصفحة الملتصق الزجاجي) */
.sticky-header {
  @apply sticky top-0 z-[1000] bg-[#050505]/60 backdrop-blur-xl border-b border-white/5 py-4;
}

/* 111. Avatar Ring Aura (هالة حول صور المدرسين والطلاب) */
.avatar-ring {
  @apply p-1 rounded-full bg-gradient-to-tr from-primary via-transparent to-primary animate-spin-slow;
}

@keyframes spin-slow {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* 112. Floating Action Button - FAB (زر الإجراء العائم) */
.fab-btn {
  @apply fixed bottom-24 right-6 w-14 h-14 bg-primary rounded-2xl flex items-center justify-center text-white shadow-2xl shadow-primary/40 z-[4000] active:scale-90 transition-all;
}

/* 113. No-Content State (شاشة "لا يوجد محتوى") */
.empty-state {
  @apply flex flex-col items-center justify-center py-20 text-center text-gray-500;
}

.empty-state-icon {
  @apply w-20 h-20 bg-white/5 rounded-full flex items-center justify-center mb-6 text-gray-700;
}

/* 114. Responsive Typography (ضبط الخطوط للموبايل) */
@media (max-width: 640px) {
  .text-hero { font-size: 2.5rem !important; line-height: 1.2; }
  .text-section { font-size: 1.5rem !important; }
  .p-mobile { padding: 1.25rem !important; }
}

/* 115. Interactive Map Icons (أيقونات الخريطة التفاعلية) */
.map-marker {
  @apply w-6 h-6 bg-primary rounded-full border-4 border-white shadow-xl animate-bounce;
}

/* 116. Blur-in Entrance (أنيميشن الدخول الضبابي) */
.blur-in {
  animation: blur-in-anim 0.8s ease-out forwards;
}

@keyframes blur-in-anim {
  from { filter: blur(20px); opacity: 0; transform: scale(0.9); }
  to { filter: blur(0); opacity: 1; transform: scale(1); }
}

/* 117. User Profile Banner (غلاف البروفايل) */
.profile-banner {
  @apply w-full h-48 md:h-64 bg-gradient-to-br from-[#1a1a1a] to-black relative overflow-hidden;
}

.profile-banner::after {
  content: '';
  @apply absolute inset-0 bg-grid-pattern opacity-20;
}

/* 118. Scroll-Linked Animations (محاكاة الربط مع التمرير) */
.scroll-reveal {
  @apply opacity-0 translate-y-10 transition-all duration-700;
}

.scroll-reveal.visible {
  @apply opacity-100 translate-y-0;
}

/* 119. Haptic Feedback Simulation (محاكاة استجابة اللمس) */
.haptic-touch:active {
  @apply bg-white/10 scale-95;
}

/* 120. Global Reset for PWA (تحسينات الويب كالتطبيق) */
html {
  overscroll-behavior-y: contain; /* يمنع السحب لأسفل لتحديث الصفحة في الموبايل */
}

    /* 121. World-Class Floating Course Cards (كروت الكورسات الطائرة) */
.course-card-floating {
  @apply relative bg-[#111] rounded-[40px] border border-white/5 transition-all duration-500;
  transform-style: preserve-3d;
  will-change: transform, box-shadow;
  box-shadow: 0 10px 30px -10px rgba(0,0,0,0.5);
}

.course-card-floating:hover {
  @apply -translate-y-4 border-white/20;
  box-shadow: 
    0 40px 80px -20px rgba(0,0,0,0.8),
    0 0 20px var(--primary-glow);
}

/* تأثير الإضاءة المتحركة داخل الكرت عند التحويم */
.course-card-floating::before {
  content: '';
  @apply absolute inset-0 opacity-0 transition-opacity duration-500 pointer-events-none rounded-[40px];
  background: radial-gradient(
    800px circle at var(--mouse-x) var(--mouse-y), 
    rgba(255,255,255,0.06), 
    transparent 40%
  );
  z-index: 3;
}

.course-card-floating:hover::before {
  @apply opacity-100;
}

/* 122. Premium Card Floating Badge (وسام طائر فوق الكرت) */
.floating-badge {
  @apply absolute -top-4 -right-4 bg-white text-black font-black text-[10px] px-5 py-2 rounded-2xl shadow-2xl z-10;
  animation: float-mini 3s infinite ease-in-out;
}

@keyframes float-mini {
  0%, 100% { transform: translateY(0) rotate(5deg); }
  50% { transform: translateY(-8px) rotate(-5deg); }
}

/* 123. Mobile Ultra-Smooth Scrolling (تمرير عالمي للموبايل) */
.mobile-smooth-area {
  @apply flex overflow-x-auto gap-6 px-6 py-10 no-scrollbar;
  scroll-snap-type: x mandatory;
  perspective: 1000px;
}

.mobile-smooth-area > div {
  scroll-snap-align: center;
  @apply shrink-0 w-[85vw] max-w-[350px];
}

/* 124. Holographic Effect (تأثير الهولوجرام على الصور) */
.hologram-img {
  @apply relative overflow-hidden rounded-[30px];
}

.hologram-img::after {
  content: "";
  @apply absolute inset-0 opacity-20 pointer-events-none;
  background: linear-gradient(
    105deg,
    transparent 30%,
    rgba(255, 255, 255, 0.4) 45%,
    rgba(255, 255, 255, 0.6) 50%,
    rgba(255, 255, 255, 0.4) 55%,
    transparent 70%
  );
  background-size: 200% 200%;
  animation: hologram-shine 4s infinite linear;
}

@keyframes hologram-shine {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* 125. Dynamic Mobile Tab Indicator (مؤشر التبويب الديناميكي) */
.tab-indicator-pill {
  @apply absolute bottom-0 h-1 bg-primary rounded-full transition-all duration-500 ease-[cubic-bezier(0.68,-0.55,0.265,1.55)];
}

/* 126. Glass Bottom Sheet Overlay (غطاء زجاجي للنوافذ المنبثقة) */
.sheet-overlay {
  @apply fixed inset-0 bg-black/40 backdrop-blur-md opacity-0 pointer-events-none transition-opacity duration-500 z-[5500];
}

.sheet-overlay.active {
  @apply opacity-100 pointer-events-auto;
}

/* 127. Floating Navbar for Mobile (شريط علوي طائر) */
@media (max-width: 768px) {
  .floating-header-mobile {
    @apply fixed top-4 left-4 right-4 h-16 bg-black/40 backdrop-blur-xl border border-white/5 rounded-3xl z-[4500] flex items-center justify-between px-6 shadow-2xl;
  }
}

/* 128. Premium Lesson Progress (تقدم الدرس السينمائي) */
.progress-ring-mini {
  @apply w-12 h-12 rounded-full border-2 border-white/5 flex items-center justify-center text-[10px] font-bold;
  background: conic-gradient(var(--primary) var(--prog), transparent 0);
}

/* 129. Cyberpunk Border Glow (حدود متوهجة سيبرانية) */
.cyber-border {
  @apply relative p-[1px] rounded-[40px] bg-white/10;
  transition: all 0.5s;
}

.cyber-border:hover {
  background: linear-gradient(45deg, var(--primary), #fff, var(--primary));
  box-shadow: 0 0 30px var(--primary-glow);
}

/* 130. Touch-Friendly Interaction (تفاعلات اللمس النهائية) */
.touch-ripple {
  position: relative;
  overflow: hidden;
}

.touch-ripple::after {
  content: "";
  @apply absolute inset-0 bg-white opacity-0 transition-opacity;
}

.touch-ripple:active::after {
  @apply opacity-10;
}

/* 131. Final System Clean-up (تصفية النظام النهائية) */
html {
  scroll-behavior: smooth;
  -webkit-tap-highlight-color: transparent;
  user-select: none; /* منع تحديد النصوص لجعل الموقع يشبه التطبيق */
}

/* الحفاظ على اختيار النصوص داخل خانات الإدخال فقط */
input, textarea {
  user-select: text;
}

/* 132. Deep Night PWA Optimization (تحسين الوضع الليلي العميق) */
@media (prefers-color-scheme: dark) {
  .bg-deep-dark {
    background: radial-gradient(circle at top, #0a0a0a 0%, #000 100%);
  }
}
